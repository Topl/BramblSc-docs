"use strict";(self.webpackChunksdk_spec=self.webpackChunksdk_spec||[]).push([[3915],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=a,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||r;return n?i.createElement(m,o(o({ref:t},p),{},{components:n})):i.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8006:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var i=n(7462),a=(n(7294),n(3905));const r={},o="Hiding Nondeterminism and Organizing TxO State",s={unversionedId:"Overview/HidingNonDeterminism",id:"Overview/HidingNonDeterminism",title:"Hiding Nondeterminism and Organizing TxO State",description:"One of the design goals of this SDK is to model the state of TxOs (transaction outputs). The following discussion ignores transactions with multi-signature spending propositions.",source:"@site/docs/Overview/HidingNonDeterminism.md",sourceDirName:"Overview",slug:"/Overview/HidingNonDeterminism",permalink:"/sdk-spec/docs/Overview/HidingNonDeterminism",draft:!1,editUrl:"https://github.com/topl/sdk-spec/tree/main/packages/create-docusaurus/templates/shared/docs/Overview/HidingNonDeterminism.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Glossary",permalink:"/sdk-spec/docs/Overview/Glossary"},next:{title:"Implementation Guidelines",permalink:"/sdk-spec/docs/Overview/ImplementationGuidelines"}},l={},c=[],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"hiding-nondeterminism-and-organizing-txo-state"},"Hiding Nondeterminism and Organizing TxO State"),(0,a.kt)("p",null,"One of the design goals of this SDK is to model the state of ",(0,a.kt)("em",{parentName:"p"},"TxOs")," (transaction outputs). The following discussion ignores transactions with multi-signature spending propositions."),(0,a.kt)("p",null,"Transactions have two attributes we use to reason about non-determinism. These attributes are called ",(0,a.kt)("em",{parentName:"p"},"confidence factor")," and ",(0,a.kt)("em",{parentName:"p"},"chain distance"),"."),(0,a.kt)("p",null,"The SDK gets a value for the confidence factor when it queries Genus to learn the outcome of a posted transaction. The confidence factor is the likelihood that we know the correct outcome of a given transaction. For example, if the confidence factor is 1 - 10",(0,a.kt)("sup",null,"-9"),", that means there is only 1 chance in 10",(0,a.kt)("sup",null,"9")," that our knowledge about the state of the TxOs within the transaction is wrong. When a transaction has been posted and we do not yet know its outcome, the confidence factor is set to NaN."),(0,a.kt)("p",null,"The outputs of transactions are TxOs that contain a quantity of a type of asset. Addresses are associated with a possibly empty set of TxOs. It is through their association with TxOs that addresses are considered to have assets. "),(0,a.kt)("p",null,"The wallet assigns one of these states to each TxO:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"settled"),(0,a.kt)("br",{parentName:"li"}),"After a transaction outputs a TxO to an address, the TxO is added to the address in the wallet with status of ",(0,a.kt)("inlineCode",{parentName:"li"},"settled"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"pendingSpend"),(0,a.kt)("br",{parentName:"li"}),"When a transaction is posted to spend a TxO, the wallet changes the status of the TxO to ",(0,a.kt)("inlineCode",{parentName:"li"},"pendingSpend"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"spent"),(0,a.kt)("br",{parentName:"li"}),"When the wallet learns that a transaction was successful in spending the contents of a TxO, the status of the TxO is changed to ",(0,a.kt)("inlineCode",{parentName:"li"},"spent"),". If the transaction does not succeed within the expected amount of time, the status of the TxO is changes back to ",(0,a.kt)("inlineCode",{parentName:"li"},"settled"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"surprise"),(0,a.kt)("br",{parentName:"li"}),"In rare circumstance the wallet will discover that the status of a TxO was incorrectly set to ",(0,a.kt)("inlineCode",{parentName:"li"},"settled")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"spend"),". When this is discovered, the status of the TxO is set to ",(0,a.kt)("inlineCode",{parentName:"li"},"surprise"),".")),(0,a.kt)("p",null,"We will normally learn about a surprise when we analyze the results of querying Genus for the outcome of a subsequent transaction. A ",(0,a.kt)("inlineCode",{parentName:"p"},"surprise")," state will occur when the previously settled transaction that contains the TxOs has been reorged out of the canonical blockchain."),(0,a.kt)("p",null,"It is worth noting that subsequent queries of Genus may result in TxO with a ",(0,a.kt)("inlineCode",{parentName:"p"},"surprise")," state changing to either ",(0,a.kt)("inlineCode",{parentName:"p"},"settled")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"spent")," (reverting back to its previous state). This occurs when its transaction has reappeared in the canonical blockchain. "),(0,a.kt)("p",null,"Over time it becomes less likely that a transaction reorged out of the blockchain will reappear. The SDK will remove TxOs that have been in a surprise state for more than some amount of time."))}u.isMDXComponent=!0}}]);